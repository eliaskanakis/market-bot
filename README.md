# MarketBot

This is an experimental app that offers an AI assistant providing voice guidance to the user throughout the shopping process.

## Functional Description

The user registers the desired shopping list, and during shopping, the assistant can provide reminders for shopping items based on the user's requests.   
The user can also request modifications to the list, such as removal of specific items.   
For example, let's say the shopping list includes bananas, apples, tomatoes, potatoes, spaghetti, cheese, and milk.   
The user can ask the assistant, "Please tell me the fruits".   
The assistant will respond with "bananas and apples".  
If the user requests, "Please remove the fruits (or the apples)" the assistant will respond by listing the items that have been removed from the shopping list.

A video presentation is accessible at [youtube](https://www.youtube.com/watch?v=-pK0CueuXKM).
A Greek instance of the app is available at (https://ekanakis-marketbot.hf.space/site/). This instance is installed on a basic infrastructure, and the average response time is approximately 7 seconds.
Please note that there is no guarantee of uninterrupted functionality, as the [ChatGPT](https://chat.openai.com/) is funded through my personal account.  

## Technical Description

The application consists of both a [server](https://github.com/eliaskanakis/market-bot/tree/master/server) 
and a [client](https://github.com/eliaskanakis/market-bot/tree/master/client). 
The [client](https://github.com/eliaskanakis/market-bot/tree/master/client) captures real-time microphone input.
This input is then processed using the [ricky0123/vad voice activity detector](https://github.com/ricky0123/vad).
When the user stops to speak the client sends the recorded waveform to the server. The server performs the following tasks:
* Transforms text to speech (ASR) using [Facebook's Massively Multilingual Speech ASR](https://huggingface.co/facebook/mms-1b-all)
* Constructs a prompt for [ChatGPT](https://chat.openai.com/) incorporating the items of the list and the transcribed text
* [ChatGPT](https://chat.openai.com/) responds with the items to be listed to the user, or removed from the list.
* Before responding to the client, the server converts the text generated by [ChatGPT](https://chat.openai.com/) into speech using [Facebook's Massively Multilingual Speech TTS](https://huggingface.co/facebook/mms-tts)
* The client receives the server's response and plays the generated waveform to the user

The shopping list is maintained within the local storage of the client and is subsequently transferred to the server alongside the recorded waveform.
This approach eliminates the need for specific storage and security requirements on the server side, while also minimizing the development effort for this prototype.

## Getting Started

### Dependencies

* Python 3.9
* [Hugging Face Transformers](https://huggingface.co/)
* [PyTorch](https://pytorch.org/)
* [VITS](https://github.com/jaywalnut310/vits)
* [Massively Multilingual Speech (MMS) : Text-to-Speech Models](https://huggingface.co/facebook/mms-tts)
* [Massively Multilingual Speech (MMS) - Finetuned ASR - ALL](https://huggingface.co/facebook/mms-1b-all)
* [VITS: Conditional Variational Autoencoder with Adversarial Learning for End-to-End Text-to-Speech](https://github.com/jaywalnut310/vits)
* [ricky0123/vad](https://github.com/ricky0123/vad)
* [Node.js](https://nodejs.org/)
* [Next.js](https://nextjs.org/)
* [React.js](https://react.dev/)

### Installing

To set up a local development environment:

* git clone https://github.com/eliaskanakis/market-bot.git
* cd market-bot/server
* python -m venv venv
* ./venv/Scripts/Activate.ps1
* pip install --upgrade pip
* pip install --no-cache-dir --upgrade -r requirements.txt
* git clone https://github.com/jaywalnut310/vits.git
* cd ./vits/monotonic_align
* python setup.py build_ext --inpla
* cd ..
* Set the envirmenment variable OPENAI_API_KEY with your own key
* On linux set the envirmenment variable to [local repository path]/server/vits:$PYTHONPATH 
* On windows set the envirmenment variable to '[local repository path]/server/vits'
* cd [local repository path]/client/
* npm install

The Dockerfile is prepared for deployment to Hugging Face space.

### Executing program

To launch the server:
* cd [local repository path]/server/
* python -m server

To launch the client:
* cd [local repository path]/client/
* npm run dev
* open your browser at (https://localhost:3000

## Authors

* [Elias Kanakis](https://www.linkedin.com/in/elias-kanakis/)
* [Zafiris Kanakis](https://www.linkedin.com/in/zafeiris-kanakis-759818271/)

## License

This project is licensed under the [CC-BY-NC 4.0] License. 

## Acknowledgments

* [ricky0123/vad](https://github.com/ricky0123/vad). Voice activation detection library for javascript
* [silero-vad](https://github.com/snakers4/silero-vad).  Pre-trained enterprise-grade Voice Activity Detector
* [Hugging Face](https://huggingface.co/). Open source data science and machine learning platform
* [Massively Multilingual Speech (MMS) : Text-to-Speech Models](https://huggingface.co/facebook/mms-tts)
* [Massively Multilingual Speech (MMS) - Finetuned ASR - ALL](https://huggingface.co/facebook/mms-1b-all)
* [VITS: Conditional Variational Autoencoder with Adversarial Learning for End-to-End Text-to-Speech](https://github.com/jaywalnut310/vits)
* [PyTorch](https://pytorch.org/)